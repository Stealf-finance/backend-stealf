â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ğŸ” PREUVE: Montants Invisibles vs Visibles              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PART 1: DENOMINATION POOL (deposit_to_pool)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Transaction: 48mhKtkcDkYiv6Dzt3iLHbJi4a5cLzUx59pfWDxA7jmrJHBPioJEB6tiVnmjP9wCNeGbNfzdz2LcoKGpReijfyjq
Explorer: https://explorer.solana.com/tx/48mhKtkcDkYiv6Dzt3iLHbJi4a5cLzUx59pfWDxA7jmrJHBPioJEB6tiVnmjP9wCNeGbNfzdz2LcoKGpReijfyjq?cluster=devnet

Log du programme:
  "Program log: ğŸ’° Depositing to pool 1"
  "Program log:   - Amount (implicit): 500000000 lamports"
                                       ^^^^^^^^^^
                                    CalculÃ© cÃ´tÃ© programme!

Recherche du montant dans instruction data:
  500000000 lamports = 0x1DCD6500 en little-endian
  
  RÃ©sultat: âŒ PAS TROUVÃ‰!
  
  Le montant N'EST PAS dans l'instruction data.
  Il est dÃ©terminÃ© par pool_id=1 â†’ 0.5 SOL (implicite).

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PART 2: FLEXIBLE AMOUNT (deposit_with_commitment)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Transaction: 3KKiz7a7k5sifa1B7X1ePvrzgib4Fn2Gw2E1KKJoCyGxvPLjB6XH3JLd7hMo5nqWBbzGRybVhrB2Mq1AKubwDTNa
Explorer: https://explorer.solana.com/tx/3KKiz7a7k5sifa1B7X1ePvrzgib4Fn2Gw2E1KKJoCyGxvPLjB6XH3JLd7hMo5nqWBbzGRybVhrB2Mq1AKubwDTNa?cluster=devnet

Log du programme:
  "Program log: ğŸ’° Depositing with commitment (Umbra-style)"
  "Program log:   - Amount: 100000000 lamports (plaintext for transfer)"
                             ^^^^^^^^^
                          PassÃ© en paramÃ¨tre!

Recherche du montant dans instruction data:
  100000000 lamports = 0x05F5E100 en little-endian
  
  Instruction data (offset 0x110):
  00000110: a8e9 6002 a600 e1f5 0500 0000 0092 5b7c
                         ^^^^^^^^^^^^^ 
                         TrouvÃ©! 00e1f50500000000 = 100000000

  RÃ©sultat: âœ… TROUVÃ‰ Ã  offset 0x115!
  
  Le montant EST VISIBLE dans l'instruction data.
  N'importe qui peut dÃ©coder la transaction et voir 0.1 SOL.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
CONCLUSION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ System                          â”‚ Montant dans instruction? â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Denomination Pools              â”‚   âŒ NON (implicite)      â”‚
â”‚ Flexible Amounts                â”‚   âœ… OUI (explicite)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Denomination Pools:
  â€¢ Montant dÃ©terminÃ© par pool_id (0-4)
  â€¢ pool_id=1 â†’ TOUJOURS 0.5 SOL
  â€¢ Pas de paramÃ¨tre amount dans l'instruction
  â€¢ â†’ 100% INVISIBLE on-chain

Flexible Amounts:
  â€¢ Montant passÃ© en paramÃ¨tre u64
  â€¢ N'importe quel montant possible
  â€¢ ParamÃ¨tre visible dans instruction data
  â€¢ â†’ Flexible mais VISIBLE on-chain

âœ… PREUVE Ã‰TABLIE: Les denomination pools cachent vraiment le montant!
